<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


    <title>Heroku, gunicorn and flask wsgi app. · Nguyen Nguyen</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="Heroku, gunicorn and flask wsgi app." />
<meta name="twitter:description" content="A walk through of Heroku’s getting started guide to host a flask application on Heroku.">

<meta name="description" content="A walk through of Heroku’s getting started guide to host a flask application on Heroku.">


    <meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o">


<link rel="icon" href="http://0.0.0.0:4000/assets/favicon.png">
<link rel="apple-touch-icon" href="http://0.0.0.0:4000/assets/touch-icon.png">
<link rel="stylesheet" href="http://0.0.0.0:4000/assets/core.css">
<link rel="canonical" href="http://0.0.0.0:4000/notes/gunicorn-flask-wsgi-heroku">
<link rel="alternate" type="application/atom+xml" title="Nguyen Nguyen" href="http://0.0.0.0:4000/feed.xml" />





    </head>

    <body>

        <aside class="logo">

    

    <a href="/">
        <img src="http://www.gravatar.com/avatar/20929ff4cccf542a7756932f8ae9baa8.png?s=100" class="gravatar">
    </a>
    <span class="logo-prompt">Back to Home</span>
</aside>

<div class="page-navigation">
    <a href="http://0.0.0.0:4000" title="Back to Homepage">Home</a>
    <a href="http://0.0.0.0:4000/project" title="Back to Homepage">Project</a>
    <a href="http://0.0.0.0:4000/about" title="Back to Homepage">About</a>
</div>

<article>
    <div class="divider"></div>
</article>


        <main>
            <article>

    <div class="center">
        <h1>Heroku, gunicorn and flask wsgi app.</h1>
        <time>December 31, 2015</time>
    </div>

    <div class="divider"></div>

    <p>A walk through of 
<a href="https://devcenter.heroku.com/articles/getting-started-with-python-o">Heroku’s getting started guide</a> 
to host a flask application on Heroku.</p>

<ul>
  <li><strong><a href="https://en.wikipedia.org/wiki/Web_Server_Gateway_Interface">wsgi</a></strong>: A spefication that defines an interface for how web servers and web application communicated.</li>
  <li><strong><a href="http://gunicorn.org/">gunicorn</a></strong>: A wsgi implementation of a http server to handle http requests routing.</li>
  <li><strong><a href="http://flask.pocoo.org/">flask</a></strong>: The web framework where we will define our application logic based on incoming requests.</li>
  <li><strong><a href="https://www.heroku.com/">heroku</a></strong>: Where we will host our code and make it available on the open internet.</li>
</ul>

<h3 id="1-prepping-an-isolated-python-environment">1. Prepping an isolated python environment</h3>

<ul>
  <li>
    <p>We’ll create a directory for our project and start up a new <a href="https://virtualenv.readthedocs.org/en/latest/">virtualenv</a>. This will give us an isolated python environment to play around in:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">mkdir </span>goodbye
  <span class="nb">cd </span>goodbye
  virtualenv <span class="nt">--no-site-packages</span> venv
  <span class="nb">source </span>venv/bin/activate
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a <strong>requirements.txt</strong> file with contents:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Flask==0.10.1
  gunicorn==19.4.3
</code></pre></div>    </div>
  </li>
  <li>
    <p>Then install them, in a terminal run..</p>

    <p><code class="highlighter-rouge">pip install -r requirements.txt</code></p>
  </li>
</ul>

<h3 id="2-create-a-simple-goodbye-flask-app-with-gunicorn">2. Create a simple goodbye flask app with gunicorn</h3>

<ul>
  <li>
    <p>Create an <strong>app.py</strong> file under the <strong>goodbye</strong> directory with contents:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

  <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

  <span class="nd">@app.route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">goodbye</span><span class="p">():</span>
      <span class="k">return</span> <span class="s">'Goodbye world...'</span>
</code></pre></div>    </div>

    <p>Your directory should now look like this:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  /goodbye/
  ____ requirements.txt
  ____ app.py
</code></pre></div>    </div>
  </li>
  <li>
    <p>Start up the app on localhost! Your app should be available at localhost:8000. run…</p>

    <p><code class="highlighter-rouge">gunicorn app:app --reload -b 127.0.0.1:8000</code></p>

    <p><strong>–reload</strong> will ask gunicorn to reload the server if there are any changes to  your flask app. <strong>-b</strong> binds our application to 127.0.0.1 address at port 8000</p>
  </li>
</ul>

<h3 id="3-add-your-project-version-control">3. Add your project version control</h3>

<ul>
  <li>
    <p>Using <a href="https://git-scm.com/book/en/v2">git</a> we’ll version control our project, run..</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  git init
  git commit <span class="nt">-m</span> <span class="s1">'add a simple flask app with gunicorn'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>We’ll also want to ignore a few things from version control. Create a <strong>.gitignore</strong> file with contents:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  venv
  *.pyc
</code></pre></div>    </div>

    <p>Your project should now look like this:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  /goodbye/
  ____ requirements.txt
  ____ app.py
  ____ .gitignore
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="4-hosting-our-application-on-heroku">4. Hosting our application on Heroku</h3>

<ul>
  <li>
    <p>Login to heroku, you’ll need to make an account. run…</p>

    <p><code class="highlighter-rouge">heroku login</code></p>
  </li>
  <li>
    <p>Create a heroku app with our project, heroku will gives us a random name. run…</p>

    <p><code class="highlighter-rouge">heroku create</code></p>
  </li>
  <li>
    <p>Give heroku instructions to start up our app. Create a <strong>Procfile</strong> file under the <strong>goodbye</strong> directory with contents:</p>

    <p><code class="highlighter-rouge">web: gunicorn app:app --log-file=-</code></p>

    <p>This tells heroku to start up the application with gunicorn on a web node where the application is hosted.
  Your directory should now look like this:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  /goodbye/
  ____ requirements.txt
  ____ app.py
  ____ Procfile
  ____ .gitignore
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now we move our project up to the heroku platform. run…</p>

    <p><code class="highlighter-rouge">git push heroku head</code></p>
  </li>
  <li>
    <p>Once it’s finish, we can open our hosted applpication. run…</p>

    <p><code class="highlighter-rouge">heroku open</code></p>
  </li>
</ul>


</article>

<div class="page-navigation">
    
    <a class="next" href="http://0.0.0.0:4000/notes/errbot-on-slack" title="NEXT: Errbot on Slack">&lt;&lt;</a>
        <span> &middot; </span>
  
        <a class="home" href="http://0.0.0.0:4000" title="Back to Homepage">Home</a>
  
</div>

        </main>

        <div class="footer">
  <span class="block">&lt;/&gt; <a href="http://github.com/heiswayi/the-plain" title="a minimalist Jekyll theme for personal blog">The Plain theme</a> by <a href="http://heiswayi.github.io">Heiswayi Nrird</a>.</span>
  <!--<span class="block">&copy; 2018 Nguyen Nguyen</span>-->
</div>


    </body>

</html>
